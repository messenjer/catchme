(function(){function e(t,n){var r=t.cssRules||t.rules||[];for(var i=0;i<r.length;i++){var s=r[i];s.type==CSSRule.IMPORT_RULE?e(s.styleSheet,n):(s.type===CSSRule.KEYFRAMES_RULE||s.type===CSSRule.WEBKIT_KEYFRAMES_RULE)&&n(s,t,i)}}function t(e){this.original=e,this.keyText=e.keyText,this.css={};var t=e.style.cssText.split(";");for(var n=0;n<t.length;n++){var r=t[n].split(":");if(r.length==2){var i=r[0].replace(/^\s+|\s+$/g,""),s=r[1].replace(/^\s+|\s+$/g,"");this.css[i]=s}}}function n(e){this.original=e,this.name=e.name,this.keyframes=[],this.keytexts=[],this.keyframeHash={},this.initKeyframes()}function r(){this.animations={};var t=document.styleSheets,r=this.animations;for(var i=0;i<t.length;i++)try{e(t[i],function(e){r[e.name]=new n(e)})}catch(s){}}n.prototype.initKeyframes=function(){this.keyframes=[],this.keytexts=[],this.keyframeHash={};var e=this.original;for(var n=0;n<e.cssRules.length;n++){var r=new t(e.cssRules[n]);this.keyframes.push(r),this.keytexts.push(r.keyText),this.keyframeHash[r.keyText]=r}},n.prototype.getKeyframeTexts=function(){return this.keytexts},n.prototype.getKeyframe=function(e){return this.keyframeHash[e]},n.prototype.setKeyframe=function(e,t){var n=e+" {";for(var r in t)n+=r+":"+t[r]+";";n+="}",this.original.insertRule(n),this.initKeyframes()},n.prototype.clear=function(){for(var e=0;e<this.keyframes.length;e++)this.original.deleteRule(this.keyframes[e].keyText)},r.prototype.get=function(e){return this.animations[e]},r.prototype.getDynamicSheet=function(){if(!this.dynamicSheet){var e=document.createElement("style");e.rel="stylesheet",e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e),this.dynamicSheet=e.sheet}return this.dynamicSheet},r.prototype.create=function(e){var t=this.getDynamicSheet();e||(e="anim"+Math.floor(Math.random()*1e5));try{var r=t.insertRule("@keyframes "+e+"{}",t.cssRules.length)}catch(i){if(i.name!="SYNTAX_ERR")throw i;r=t.insertRule("@-webkit-keyframes "+e+"{}",t.cssRules.length)}return this.animations[e]=new n(t.cssRules[r]),this.animations[e]},r.prototype.remove=function(t){var r=this.getDynamicSheet();t=t instanceof n?t.name:t,this.animations[t]=null;try{e(r,function(e,n,r){e.name==t&&n.deleteRule(r)})}catch(i){}},typeof define=="function"&&define.amd?define([],function(){return new r}):window.CSSAnimations=new r})()