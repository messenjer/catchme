define(["require","zepto"],function(e){function r(e){this.parent=e;var r=t(e.el).children("header"),i=t("h1",r),s=r.children(),o=s.get().indexOf(i.get(0)),u='<div class="navitems"></div>';i.css({position:"absolute",top:0,left:0});var a=s.slice(0,o),f=t(u).addClass("left");a.length?a.wrapAll(f):r.prepend(f);var l=s.slice(o+1,s.length),c=t(u).addClass("right");l.length?l.wrapAll(c):r.append(c),r.find("button").on(n,function(){var n=t(this);if(n.data("view")){var r=t(n.data("view")).get(0);r.open(e.model,n.data("animation"))}}),this.text=t(i).text(),this.el=r.get(0)}var t=e("zepto"),n="ontouchstart"in document.documentElement?"touchstart":"click";return r.prototype.addBack=function(){var e=t(".navitems.left",this.el),r=this;if(!e.children().length){var i=t('<button class="back">Back</button>');e.append(i),i.on(n,function(){r.parent.close()})}},r.prototype.removeBack=function(){t(".navitems.left button.back",this.el).remove()},r.prototype.setTitle=function(e){this.text=e;var n=t(this.el),r=n.children("h1"),i=n.children(".navitems.left").width(),s=n.children(".navitems.right").width(),o=Math.max(i,s),u=n.width()-o*2;e.length>14&&(e=e.slice(0,11)+"..."),r.text(e),r.css({left:o,width:u,fontSize:"20pt"})},r.prototype.getTitle=function(){return this.text},r})