// Generated by CoffeeScript 1.4.0

define(["zepto"], function($) {
  var StateMachine;
  return StateMachine = (function() {

    function StateMachine() {}

    StateMachine.prototype.add = function(controller) {
      console.log("Adding controller ${controller}");
      this.bind("change", function(e, current) {
        console.log("Binded ${controller}");
        if (controller === current) {
          return controller.activate();
        } else {
          return controller.deactivate();
        }
      });
      return controller.active = $.proxy(function() {
        console.log("Change triggered ${controller}");
        this.trigger("change", controller);
      }, this);
    };

    StateMachine.prototype.bind = function() {
      var _ref;
      if ((_ref = this.o) == null) {
        this.o = $('body');
      }
      return this.o.bind.apply(this.o, arguments);
    };

    StateMachine.prototype.trigger = function() {
      var _ref;
      if ((_ref = this.o) == null) {
        this.o = $('body');
      }
      return this.o.trigger.apply(this.o, arguments);
    };

    return StateMachine;

  })();
});
