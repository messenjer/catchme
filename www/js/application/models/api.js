// Generated by CoffeeScript 1.4.0

define([], function() {
  var RtbfApi;
  return RtbfApi = (function() {

    function RtbfApi() {
      this.url = "http://www.local.rtbf.be/api/test/demo2";
      this.data = [];
    }

    RtbfApi.prototype.setCallback = function(callback) {
      this.callback = callback;
    };

    RtbfApi.prototype.setErrorCallback = function(errorCallback) {
      this.errorCallback = errorCallback;
    };

    RtbfApi.prototype.fetchData = function() {
      var async,
        _this = this;
      if (this.callback) {
        async = true;
      } else {
        async = false;
      }
      return $.ajax(this.url, {
        async: async,
        success: function(data, textStatus, jqXHR) {
          _this.data = data;
          _this.error = textStatus;
          if (_this.callback) {
            return _this.callback(data);
          }
        },
        error: function(jqXHR, textStatus, errorThrown) {
          _this.error = textStatus;
          if (_this.errorCallback) {
            return _this.errorCallback(textStatus, errorThrown);
          }
        },
        complete: function(jqXHR, textStatus) {}
      });
    };

    RtbfApi.prototype.getError = function() {
      return this.error;
    };

    RtbfApi.prototype.getData = function() {
      return this.data;
    };

    return RtbfApi;

  })();
});
